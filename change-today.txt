make this hero slider to expect a single object for the slider with array of thumbnail in that array there both images and video and must be displayed all of them as sliding the background image

"use client";
import Image from "next/image";
import { useEffect, useState, useRef } from "react";
import { Button } from "../../ui/button";
import { ChevronDown, ChevronLeft, ChevronRight } from "lucide-react";

interface HeroCardI {
  id: string;
  image: string;
  title: string;
  height: number;
  width: number;
  onClick: (title: string) => void;
}

export type HeroSliderI = {
  id: string;
  title: string;
  subtitle: string;
  description: string;
  backgroundImage: string;
  logoUrl?: string;
  cta1?: string;
  cta2?: string;
  thumbnails: string[];
  heroCards?: HeroCardI[];
  countdownDate?: string; // ISO date string for countdown target
  countdownLabel?: string; // Label for countdown (e.g., "Event Starts In", "Registration Ends In")
  cta1Action?: () => void;
  cta2Action?: () => void;
};

type CountdownTime = {
  days: number;
  hours: number;
  minutes: number;
  seconds: number;
};

type HeroProps = {
  height?: string;
  autoplayInterval?: number;
  heroSlide: HeroSliderI;
};

function HeroSlider({
  height = "min-h-[100vh] sm:min-h-[92.8vh]",
  autoplayInterval = 3000,
  heroSlide,
}: HeroProps) {
  const [currentSlide, setCurrentSlide] = useState(0);
  const [previewOpen, setPreviewOpen] = useState(false);
  const [, setPreviewIndex] = useState(0);
  const [isTransitioning, setIsTransitioning] = useState(false);
  const [isAutoplayPaused, setIsAutoplayPaused] = useState(false);
  const [isMounted, setIsMounted] = useState(false);
  const [, setProgressKey] = useState(0);
  const [touchStart, setTouchStart] = useState<number | null>(null);
  const [touchEnd, setTouchEnd] = useState<number | null>(null);
  const [countdownTime, setCountdownTime] = useState<CountdownTime>({
    days: 0,
    hours: 0,
    minutes: 0,
    seconds: 0,
  });
  const intervalRef = useRef<NodeJS.Timeout | null>(null);
  const countdownRef = useRef<NodeJS.Timeout | null>(null);

  // Handle client-side mounting
  useEffect(() => {
    setIsMounted(true);
  }, []);

  // Countdown functionality
  const calculateTimeLeft = (targetDate: string): CountdownTime => {
    const difference = +new Date(targetDate) - +new Date();

    if (difference > 0) {
      return {
        days: Math.floor(difference / (1000 * 60 * 60 * 24)),
        hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
        minutes: Math.floor((difference / 1000 / 60) % 60),
        seconds: Math.floor((difference / 1000) % 60),
      };
    }

    return { days: 0, hours: 0, minutes: 0, seconds: 0 };
  };

  // Update countdown every second
  useEffect(() => {
    const currentSlideData = heroSlides[currentSlide];

    if (currentSlideData?.countdownDate && isMounted) {
      const updateCountdown = () => {
        setCountdownTime(calculateTimeLeft(currentSlideData.countdownDate!));
      };

      updateCountdown(); // Initial calculation
      countdownRef.current = setInterval(updateCountdown, 1000);
    }

    return () => {
      if (countdownRef.current) {
        clearInterval(countdownRef.current);
      }
    };
  }, [currentSlide, heroSlide, isMounted]);

  // Auto-play functionality
  useEffect(() => {
    if (!isAutoplayPaused && !previewOpen && isMounted) {
      intervalRef.current = setInterval(() => {
        nextSlide();
      }, autoplayInterval);
    }

    return () => {
      if (intervalRef.current) {
        clearInterval(intervalRef.current);
      }
    };
  }, [
    currentSlide,
    isAutoplayPaused,
    previewOpen,
    autoplayInterval,
    isMounted,
  ]);

  // Reset progress animation when slide changes
  useEffect(() => {
    setProgressKey((prev) => prev + 1);
  }, [currentSlide]);

  // Pause autoplay when modal is open
  useEffect(() => {
    if (previewOpen) {
      setIsAutoplayPaused(true);
    } else {
      setIsAutoplayPaused(false);
    }
  }, [previewOpen]);

  // Touch handling for mobile swipe
  const handleTouchStart = (e: React.TouchEvent) => {
    setTouchEnd(null);
    setTouchStart(e.targetTouches[0].clientX);
  };

  const handleTouchMove = (e: React.TouchEvent) => {
    setTouchEnd(e.targetTouches[0].clientX);
  };

  const handleTouchEnd = () => {
    if (!touchStart || !touchEnd) return;

    const distance = touchStart - touchEnd;
    const isLeftSwipe = distance > 50;
    const isRightSwipe = distance < -50;

    if (isLeftSwipe) {
      nextSlide();
    } else if (isRightSwipe) {
      prevSlide();
    }
  };

  const goToSlide = (index: number) => {
    if (isTransitioning) return;
    setIsTransitioning(true);
    setCurrentSlide(index);

    // Reset autoplay timer when manually navigating
    if (intervalRef.current) {
      clearInterval(intervalRef.current);
    }

    setTimeout(() => setIsTransitioning(false), 500);
  };

  const nextSlide = () => {
    if (isTransitioning) return;
    setIsTransitioning(true);
    setCurrentSlide((prev) => (prev + 1) % heroSlide.length);
    setTimeout(() => setIsTransitioning(false), 500);
  };

  const prevSlide = () => {
    if (isTransitioning) return;
    setIsTransitioning(true);
    setCurrentSlide(
      (prev) => (prev - 1 + heroSlide.length) % heroSlide.length
    );

    // Reset autoplay timer when manually navigating
    if (intervalRef.current) {
      clearInterval(intervalRef.current);
    }

    setTimeout(() => setIsTransitioning(false), 500);
  };

  const openPreview = (index: number) => {
    setPreviewIndex(index);
    setPreviewOpen(true);
  };

  const handleMouseEnter = () => {
    setIsAutoplayPaused(true);
  };

  const handleMouseLeave = () => {
    setIsAutoplayPaused(false);
  };
console.log(heroSlide)
  const imageDetails = [
    {
      title: "Registration",
      description: "Sign up for the NBC Dodoma Marathon",
    },
    {
      title: "Training",
      description: "Comprehensive training programs for all levels",
    },
    { title: "Route", description: "Scenic marathon route through Dodoma" },
    {
      title: "Finish Line",
      description: "Cross the finish line and celebrate your achievement",
    },
  ];

  const formatNumber = (num: number): string => {
    return num.toString().padStart(2, "0");
  };

  return (
    <section
      className={`relative ${height} flex items- overflow-hidden`}
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
      onTouchStart={handleTouchStart}
      onTouchMove={handleTouchMove}
      onTouchEnd={handleTouchEnd}
    >
      {/* Sliding Background Images */}
      <div className="absolute inset-0 z-0">
        <div
          className="flex transition-transform duration-500 ease-in-out h-full w-full"
          style={{ transform: `translateX(-${currentSlide * 100}%)` }}
        >
          {heroSlides.map((slide, index) => (
            <div
              key={slide.id}
              className="min-w-full h-full bg-cover bg-center relative"
              style={{
                backgroundImage: `linear-gradient(to right, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0.3) 100%), url("https://22.32.245.79:7781/api/media-files/f1c9495d-97cc-5b17-a1b0-99b7d5fa8658/access)`,
                backgroundPosition: "center center",
                backgroundSize: "cover",
              }}
              aria-label={`Hero Background Image ${index + 1}`}
              role="img"
              aria-roledescription="Hero Section Background"
            />
          ))}
        </div>
      </div>

      {/* Navigation Chevrons - Desktop and Tablet */}
      {/* <button
        onClick={prevSlide}
        disabled={isTransitioning}
        className="absolute left-2 sm:left-4 top-1/2 transform -translate-y-1/2 z-20 bg-black/20 backdrop-blur-sm hover:bg-black/40 text-white p-2 sm:p-3 rounded-full transition-all duration-300 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed hidden sm:flex items-center justify-center"
        aria-label="Previous slide"
      >
        <ChevronLeft className="w-4 h-4 sm:w-6 sm:h-6" />
      </button> */}

      {/* <button
        onClick={nextSlide}
        disabled={isTransitioning}
        className="absolute right-2 sm:right-4 top-1/2 transform -translate-y-1/2 z-20 bg-black/20 backdrop-blur-sm hover:bg-black/40 text-white p-2 sm:p-3 rounded-full transition-all duration-300 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed hidden sm:flex items-center justify-center"
        aria-label="Next slide"
      >
        <ChevronRight className="w-4 h-4 sm:w-6 sm:h-6" />
      </button> */}

      {/* Hero Content - Matching HeroVideo Layout */}
      <div className="relative z-10  flex flex-col justify-center  space-y-3 pl-40 pr-10  min-w-full">
        {/* Sliding Content */}
        <div className="relative overflow-hidden ">
          <div
            className="flex transition-transform duration-500 ease-in-out"
            style={{ transform: `translateX(-${currentSlide * 100}%)` }}
          >
            {heroSlides.map((slide) => (
              <div key={slide.id} className="min-w-full">
                {/* Logo Section */}
                <div className="space-y-6">
                  <div className="relative">
                    <Image
                      src={slide.logoUrl || "/images/dodoma-marathon.svg"}
                      alt="event-logo"
                      width={150}
                      height={150}
                      className="relative"
                      unoptimized
                    />
                  </div>

                  {/* Title and Description */}
                  <div className="max-w-xl text-white space-y-4">
                    <h2 className="heading-2 !leading-15">{slide.title}</h2>
                    <p className="text-[18px] whitespace-pre-line">{slide.description}</p>
                  </div>
                </div>

                {/* Countdown Timer */}
                <div className="mt-2">
                  {slide.countdownDate && isMounted && (
                    <div className="animate-fade-in animation-delay-200">
                      {slide.countdownLabel && (
                        <p className="text-white/80 text-sm sm:text-base font-medium tracking-wide uppercase">
                          {slide.countdownLabel}
                        </p>
                      )}
                      <div className="text-white text-[30px] font-bold flex gap-x-3">
                        <div>{formatNumber(countdownTime.days)}D</div>
                        <div>:</div>
                        <div>{formatNumber(countdownTime.hours)}H</div>
                        <div>:</div>
                        <div>{formatNumber(countdownTime.minutes)}M</div>
                        <div>:</div>
                        <div>{formatNumber(countdownTime.seconds)}S</div>
                      </div>
                    </div>
                  )}
                </div>

                {/* CTA Buttons */}
                <div className="flex xs:flex-row sm:flex-row gap-3 sm:gap-4 justify-center lg:justify-start mb-20 mt-6">
                  <Button
                    variant="outline"
                    size="lg"
                    className="animate-scale-in animation-delay-500 border border-white text-white"
                    onClick={slide.cta2Action}
                  >
                    {slide.cta2}
                  </Button>

                  <Button
                    size="lg"
                    color="primary"
                    className="animate-scale-in animation-delay-300 !px-6"
                    onClick={slide.cta1Action}
                  >
                    {slide.cta1}
                    <ChevronRight />
                  </Button>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Hero Cards and QR Code */}
        <div className="flex justify-between mt-7  w-full">
          <div className="flex gap-3">
            {heroSlides[currentSlide].heroCards?.map((heroCard, index) => (
              <div
                key={index}
                onClick={() => {
                  heroCard.onClick(heroCard.title);
                }}
              >
                <div
                  className="bg-white/10 backdrop-blur-md rounded-lg sm:rounded p-3 sm:p-3 md:p-1 border border-white/20 shadow-2xl hover:bg-white/15 transition-all duration-300 hover:scale-105 w-[146px] h-[120px] flex flex-col justify-center items-center gap-y-2 cursor-pointer"
                  onClick={() => openPreview(index)}
                >
                  <div className="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white tabular-nums">
                    <Image
                      src={heroCard.image}
                      alt={heroCard.title}
                      height={heroCard.height}
                      width={heroCard.width}
                    />
                  </div>
                  <div className="text-white/70 text-[10px] font-medium mt-1 uppercase tracking-wider">
                    {heroCard.title}
                  </div>
                </div>
              </div>
            )) || []}
          </div>

          <div>
            <Image
              src="/images/donate-qr.svg"
              alt="Donate QR Code"
              width={100}
              height={100}
            />
          </div>
        </div>
      </div>

      {/* Scroll Indicator - Responsive positioning */}
      <div className="absolute bottom-4 right-4 sm:right-8 lg:right-12 z-10 flex flex-col items-center">
        <span className="text-white/70 text-xs sm:text-sm mb-1">Scroll</span>
        <div className="w-5 h-8 sm:w-6 sm:h-10 border-2 border-white/30 rounded-full flex justify-center">
          <div className="w-1 h-2 sm:h-3 bg-white/50 rounded-full mt-1 sm:mt-2 animate-bounce"></div>
        </div>
        <ChevronDown className="w-3 h-3 sm:w-4 sm:h-4 text-white/50 animate-bounce mt-1" />
      </div>

      {/* Mobile/Tablet Slide Indicators */}
      <div className="absolute bottom-16 xs:bottom-14 sm:bottom-12 md:bottom-10 left-1/2 transform -translate-x-1/2 xl:hidden z-20">
        <div className="flex space-x-1.5 sm:space-x-2">
          {heroSlides.map((_, index) => (
            <button
              key={index}
              onClick={() => goToSlide(index)}
              disabled={isTransitioning}
              className={`w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full transition-all duration-300 disabled:opacity-50 ${
                index === currentSlide
                  ? "bg-white scale-110 sm:scale-125"
                  : "bg-white/40"
              }`}
              aria-label={`Go to slide ${index + 1}`}
            />
          ))}
        </div>
      </div>

      {/* Mobile Navigation Arrows (Touch-friendly) */}
      <div className="absolute bottom-4 xs:bottom-3 left-1/2 transform -translate-x-1/2 z-20 flex space-x-6 sm:hidden">
        <button
          onClick={prevSlide}
          disabled={isTransitioning}
          className="bg-black/30 backdrop-blur-sm text-white p-2.5 xs:p-3 rounded-full transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95"
          aria-label="Previous slide"
        >
          <ChevronLeft className="w-4 h-4 xs:w-5 xs:h-5" />
        </button>
        <button
          onClick={nextSlide}
          disabled={isTransitioning}
          className="bg-black/30 backdrop-blur-sm text-white p-2.5 xs:p-3 rounded-full transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95"
          aria-label="Next slide"
        >
          <ChevronRight className="w-4 h-4 xs:w-5 xs:h-5" />
        </button>
      </div>

      {/* Image Preview Modal */}
      {/* <ImagePreviewModal
        images={heroSlides[currentSlide].thumbnails || []}
        currentIndex={previewIndex}
        isOpen={previewOpen}
        onClose={() => setPreviewOpen(false)}
        imageDetails={imageDetails}
      /> */}

      <style jsx>{`
        .autoplay-progress-bar {
          width: 0%;
          animation: autoplay-progress ${autoplayInterval}ms linear;
          animation-fill-mode: forwards;
        }

        .autoplay-slide-progress {
          height: 0%;
          animation: slide-progress ${autoplayInterval}ms linear;
          animation-fill-mode: forwards;
        }

        @keyframes autoplay-progress {
          from {
            width: 0%;
          }
          to {
            width: 100%;
          }
        }

        @keyframes slide-progress {
          from {
            height: 0%;
          }
          to {
            height: 100%;
          }
        }

        /* Pause animations when autoplay is paused */
        ${isAutoplayPaused
          ? `
          .autoplay-progress-bar,
          .autoplay-slide-progress {
            animation-play-state: paused;
          }
        `
          : ""}

        /* Custom responsive breakpoint for very small screens */
        @media (max-width: 320px) {
          .min-w-full h1 {
            font-size: 1.5rem !important;
            line-height: 1.2 !important;
          }
          .min-w-full p {
            font-size: 0.875rem !important;
          }
        }

        /* Ensure touch targets are accessible */
        @media (max-width: 640px) {
          button {
            min-height: 44px;
            min-width: 44px;
          }
        }

        /* Prevent horizontal scrolling */
        @media (max-width: 640px) {
          .overflow-x-auto {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
          }
          .overflow-x-auto::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
          }
        }

        /* Countdown animation */
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fade-in {
          animation: fade-in 0.6s ease-out;
        }

        .animation-delay-200 {
          animation-delay: 200ms;
        }

        /* Tabular numbers for consistent digit width */
        .tabular-nums {
          font-feature-settings: "tnum";
          font-variant-numeric: tabular-nums;
        }
      `}</style>
    </section>
  );
}

export default HeroSlider;
